<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Kingdom Calendar â€“ Path of Years</title>

  <link rel="icon" type="image/png" href="favicon.png">

  <meta property="og:type" content="website">
  <meta property="og:title" content="Kingdom Calendar â€“ Path of Years">
  <meta property="og:description" content="Track the Renewed Moon, Work Days, and Shabats according to the Path of Years.">
  <meta property="og:url" content="https://kingdomcalendartool.com/">
  <meta property="og:image" content="https://kingdomcalendartool.com/favicon.png">

  <style>
    body{
      background:#020617;
      color:#e5e7eb;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      margin:0;
      padding:8px;
      display:flex;
      justify-content:center;
    }

    .calendar{ width:100%; max-width:850px; }

    .calendarHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
      margin-bottom:2px;
    }
    .calendarSide{
      width:150px;
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.16em;
      color:#9ca3af;
      white-space:nowrap;
    }
    .calendarRef{ text-align:left; }

    .calendarTitle{
      flex:1;
      text-align:center;
      font-size:18px;
      font-weight:600;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:#fef9c3;
    }

    .monthBadge{
      display:inline-block;
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.18em;
      padding:3px 9px;
      border-radius:999px;
      background:rgba(250,204,21,0.18);
      border:1px solid rgba(250,204,21,0.7);
      color:#facc15;
    }

    /* Quote fix kill-switch */
    #month-badge::before,
    #month-badge::after,
    .monthBadge::before,
    .monthBadge::after{
      content:none !important;
      display:none !important;
    }

    .calendarSub{ font-size:11px; color:#9ca3af; text-align:center; margin-bottom:2px; }
    .calendarNote{ font-size:10px; color:#9ca3af; text-align:center; margin-bottom:6px; }

    .weeksBanner{
      max-width:700px;
      margin:0 auto 8px auto;
      background:rgba(250,204,21,0.08);
      border:1px solid rgba(250,204,21,0.45);
      border-radius:10px;
      padding:8px 10px;
      text-align:center;
    }
    .weeksBannerTitle{
      font-size:11px;
      font-weight:800;
      letter-spacing:.14em;
      text-transform:uppercase;
      color:#facc15;
    }
    .weeksBannerText{
      margin-top:4px;
      font-size:11px;
      color:#e5e7eb;
      line-height:1.35;
    }
    .weeksBannerText small{
      display:block;
      margin-top:4px;
      font-size:10px;
      color:#9ca3af;
    }

    .configBar{
      background:#020617;
      border-radius:8px;
      border:1px solid #111827;
      padding:6px 8px;
      margin-bottom:8px;
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      gap:6px;
      font-size:11px;
    }
    .configLabel{ color:#e5e7eb; }
    .configBar input[type="date"],
    .configBar select{
      background:#020617;
      border:1px solid #1f2937;
      border-radius:6px;
      padding:3px 5px;
      color:#e5e7eb;
      font-size:11px;
    }
    .configHint{ font-size:10px; color:#9ca3af; }

    .monthTools{
      max-width:700px;
      margin:0 auto 8px auto;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .monthToggle{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;
      background:#0b1120;
      border:1px solid #1f2937;
      border-radius:10px;
      padding:6px 10px;
      font-size:11px;
    }
    .monthToggleLabel{
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.16em;
      color:#9ca3af;
    }
    .monthRadio{
      display:flex;
      align-items:center;
      gap:7px;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(250,204,21,0.35);
      background:rgba(250,204,21,0.06);
      cursor:pointer;
      user-select:none;
    }
    .monthRadio input{ cursor:pointer; accent-color:#facc15; }

    .day30Banner{
      background:rgba(250,204,21,0.08);
      border:1px solid rgba(250,204,21,0.55);
      color:#facc15;
      border-radius:10px;
      padding:6px 10px;
      font-size:10px;
      text-align:center;
      letter-spacing:.08em;
    }

    .todayBanner{
      background:#0b1120;
      border:1px solid #1f2937;
      border-radius:10px;
      padding:8px 10px;
      margin:0 auto 6px auto;
      font-size:13px;
      max-width:700px;
      text-align:center;
    }
    .todayBanner-main{ font-weight:600; }
    .todayBanner-sub{ font-size:11px; color:#9ca3af; margin-top:2px; }

    .pillHighlight{
      display:inline-block;
      padding:1px 6px;
      border-radius:999px;
      background:rgba(250,204,21,0.2);
      border:1px solid rgba(250,204,21,0.7);
      color:#facc15;
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.08em;
    }

    .voiceRow{
      display:flex;
      justify-content:center;
      align-items:center;
      gap:8px;
      max-width:700px;
      margin:0 auto 6px auto;
      flex-wrap:wrap;
    }

    .share-btn{
      border-radius:999px;
      border:1px solid rgba(250,204,21,0.7);
      background:rgba(250,204,21,0.08);
      color:#facc15;
      font-size:10px;
      padding:5px 10px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:4px;
      white-space:nowrap;
    }
    .share-btn span.icon{ font-size:11px; }

    .sunset-toggle-btn{
      border-radius:999px;
      border:1px solid rgba(255,184,77,0.70);
      background:rgba(255,184,77,0.08);
      color:#ffd18a;
      font-size:10px;
      padding:5px 10px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:6px;
      white-space:nowrap;
    }
    .sunset-toggle-btn .dot{
      width:7px;height:7px;border-radius:999px;
      background:rgba(255,184,77,.95);
      box-shadow:0 0 10px rgba(255,184,77,.65);
    }

    .hedashRow{
      background:#020617;
      border-radius:8px;
      border:1px solid #111827;
      padding:8px;
      margin-bottom:8px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
    }
    .hedashIcon{ font-size:24px; }
    .hedashText-main{ font-size:12px; font-weight:600; }
    .hedashText-sub{ font-size:10px; color:#9ca3af; margin-top:2px; }
    /* âœ… NEW: Hedash doctrinal note styling */
    .hedashText-note{
      margin-top:6px;
      font-size:10px;
      line-height:1.35;
      color:#cbd5e1;
    }
    .hedashText-note b{ color:#facc15; }

    .weekRow{
      display:flex;
      align-items:center;
      gap:4px;
      margin:6px 0;
      background:#020617;
      padding:4px 6px;
      border-radius:8px;
      border:1px solid #111827;
    }

    .weekLabel{
      width:60px;
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.12em;
      color:#9ca3af;
      text-align:center;
    }
    .phaseIcon{ width:26px; text-align:center; font-size:18px; }

    .dayRow{ display:flex; flex:1; gap:3px; position:relative; }

    .dayBox{
      flex:1;
      background:#111827;
      border-radius:6px;
      padding:4px 1px;
      border:1px solid #1f2937;
      font-size:10px;
      text-align:center;
      display:flex;
      flex-direction:column;
      gap:1px;
      position:relative;
    }
    .dayLabel{ font-weight:500; font-size:10px; }
    .daySub{ font-size:9px; color:#9ca3af; }

    /* Shabat as normal day styling */
    .shabat{
      background:#111827;
      border:1px solid #1f2937;
      color:#e5e7eb;
      font-weight:600;
    }
    .shabat .dayLabel{ font-weight:700; }
    .shabat .daySub{ color:#e5e7eb; font-weight:700; letter-spacing:.08em; }

    .day30{
      background:#111827;
      border:1px solid #1f2937;
    }

    .legendDetails{ margin-top:8px; font-size:12px; }
    .legendDetails summary{
      cursor:pointer;
      list-style:none;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid #1f2937;
      display:inline-block;
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.12em;
      color:#e5e7eb;
    }
    .legendDetails summary::-webkit-details-marker{ display:none; }
    .legend{ margin-top:8px; font-size:12px; text-align:center; }

    .legendRow{
      display:inline-flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      margin-bottom:8px;
    }

    .legendColor{
      width:10px;height:10px;
      border-radius:3px;
      border:1px solid #1f2937;
    }
    .legendColor.work{ background:#111827; }
    .legendColor.shabat{ background:#111827; }

    .phaseLegendTitle{
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.16em;
      color:#9ca3af;
      margin-bottom:3px;
      margin-top:3px;
    }
    .phaseLegendRow{ display:flex; justify-content:space-between; gap:4px; }
    .phaseItem{ flex:1; text-align:center; }
    .phaseItemIcon{ font-size:20px; }
    .phaseItemText{ font-size:10px; color:#9ca3af; }

    .calendarNoteBottom{ margin-top:6px; font-size:10px; color:#9ca3af; }

    :root{
      --sunsetGlow: rgba(255, 184, 77, .55);
      --sunsetLine: rgba(255, 184, 77, .28);
      --sunsetText: #ffd18a;
    }

    .dayBox.sunset-divider::before{
      content:"";
      position:absolute;
      left:-2px;
      top:6px;
      bottom:6px;
      width:1px;
      background: linear-gradient(to bottom,
        transparent,
        var(--sunsetLine),
        var(--sunsetGlow),
        var(--sunsetLine),
        transparent
      );
      box-shadow:0 0 10px var(--sunsetGlow);
      opacity:.60;
      pointer-events:none;
      transition:opacity .18s ease, box-shadow .18s ease;
    }
    .dayBox.sunset-divider:hover::before{
      opacity:1;
      box-shadow:0 0 16px rgba(255,184,77,.75);
    }

    .dayBox.sunset-divider::after{
      content: attr(data-sunset-tip);
      position:absolute;
      left:-4px;
      top:-34px;
      transform: translateX(-100%);
      background: rgba(2,6,23,.94);
      border: 1px solid rgba(255,184,77,.35);
      color: var(--sunsetText);
      padding: 6px 10px;
      border-radius: 10px;
      font-size: 12px;
      letter-spacing: .4px;
      white-space: nowrap;
      opacity: 0;
      pointer-events:none;
      box-shadow:0 10px 25px rgba(0,0,0,.35);
      transition:opacity .18s ease, transform .18s ease;
    }
    .dayBox.sunset-divider:hover::after{
      opacity:1;
      transform: translateX(-100%) translateY(-4px);
    }
    @media (hover:none){
      .dayBox.sunset-divider::after{ display:none; }
    }

    body.hide-sunset-boundaries .dayBox.sunset-divider::before,
    body.hide-sunset-boundaries .dayBox.sunset-divider::after{
      display:none;
    }

    @media (max-width:640px){
      .calendarHeader{ flex-direction:column; align-items:center; text-align:center; }
      .calendarSide{ width:auto; white-space:normal; }
      .weekRow{ padding:4px 3px; gap:3px; }
      .weekLabel{ width:52px; font-size:9px; }
      .dayBox{ font-size:9px; padding:4px 1px; }
      .dayLabel{ font-size:9px; }
      .daySub{ font-size:8px; }
      .phaseItemText{ font-size:9px; }
    }
  </style>
</head>
<body>

<div class="calendar">
  <div class="calendarHeader">
    <div class="calendarSide calendarRef">YAHEZAQAL â€” EZEKIEL 46:1</div>
    <div class="calendarTitle">THE KINGDOM CALENDAR</div>
    <div class="calendarSide" style="text-align:right;">
      <span class="monthBadge" id="month-badge">2nd Month</span>
    </div>
  </div>

  <div class="calendarSub">Work Days &amp; Shabats According to the Path of Years</div>
  <div class="calendarNote">
    Shabats always fall on Days 8, 15, 22, and 29. Months may complete in 29 or 30 days; the cycle runs from Day 1 (HEDASH) through the last Shabat.
  </div>

  <!-- âœ… FEAST OF WEEKS BANNER (2nd Month) -->
  <div class="weeksBanner" id="weeksBanner">
    <div class="weeksBannerTitle">FEAST OF WEEKS â€” COUNTING SEVEN SHABATS</div>
    <div class="weeksBannerText">
      We count <b>seven complete Shabats</b> (appointments) = <b>49 days</b> (seven weeks).
      <small>Shabat #1 was completed before this Hedash was confirmed. The next Shabat shown below begins the count at <b>2 of 7</b>.</small>
    </div>
  </div>

  <div class="configBar">
    <span class="configLabel">Confirmed HEDASH Date (Gregorian):</span>
    <input type="date" id="hedash-input" />
    <span class="configLabel">Month:</span>
    <select id="month-select">
      <option value="1">1st â€“ Abayab</option>
      <option value="2" selected>2nd Month</option>
      <option value="3">3rd Month</option>
      <option value="4">4th Month</option>
      <option value="5">5th Month</option>
      <option value="6">6th Month</option>
      <option value="7">7th Month</option>
      <option value="8">8th Month</option>
      <option value="9">9th Month</option>
      <option value="10">10th Month</option>
      <option value="11">11th Month</option>
      <option value="12">12th Month</option>
    </select>
    <span class="configHint">(Set the Renewed Moon sighting date and which month this is.)</span>
  </div>

  <div class="monthTools">
    <div class="monthToggle">
      <span class="monthToggleLabel">Month Length:</span>
      <label class="monthRadio">
        <input type="radio" name="monthLength" value="29">
        <span>29 Days</span>
      </label>
      <label class="monthRadio">
        <input type="radio" name="monthLength" value="30">
        <span>30 Days</span>
      </label>
    </div>

    <div class="day30Banner" id="day30Banner" hidden>
      30-Day Month Active â€” Day 30 is a waiting day. ðŸŒ’ HEDASH appears at evening to begin the next month when confirmed.
    </div>
  </div>

  <div class="hedashRow" id="hedashRow">
    <div class="hedashIcon">ðŸŒ’</div>
    <div>
      <div class="hedashText-main">Day 1 â€” HEDASH (Renewed Moon)</div>
      <div class="hedashText-sub">
        Sets the Shabat pattern for this month. The first full work week begins as the light grows toward ðŸŒ“ Half Moon Waxing.
      </div>

      <!-- âœ… ADDED: Hedash stand-alone day note -->
      <div class="hedashText-note">
        <b>Hedash is not a Shabat.</b> It is a stand-alone appointed Day One, not a workday.
        <b>Shabat counting begins after Hedash.</b>
      </div>
    </div>
  </div>

  <div class="todayBanner" id="todayBanner">
    <div class="todayBanner-main" id="today-main">
      Set the HEDASH date above to activate the Kingdom Calendar.
    </div>
    <div class="todayBanner-sub" id="today-sub">
      The tool will announce the current week, work day or Shabat, and day of YAHUAHâ€™S month according to the Path of Years.
    </div>
  </div>

  <div class="voiceRow">
    <button type="button" class="share-btn" onclick="sharePage()">
      <span class="icon">ðŸ”—</span>
      Share This Page
    </button>

    <button type="button" class="sunset-toggle-btn" onclick="toggleSunsetBoundaries()" title="Toggle Sunset Boundary Dividers">
      <span class="dot"></span>
      Sunset Boundaries
    </button>
  </div>

  <div style="
    text-align:center;
    font-size:10px;
    color:#facc15;
    margin:0 auto 8px auto;
    background:rgba(250,204,21,0.08);
    border:1px solid rgba(250,204,21,0.45);
    padding:4px 6px;
    border-radius:6px;
    max-width:700px;
  ">
    The calendar changes over from evening to evening at <b>7:00 PM</b>, according to YAHUAH'S time.
  </div>

  <!-- WEEK 1 -->
  <div class="weekRow" data-week="1">
    <div class="weekLabel">1st Week</div>
    <div class="phaseIcon">ðŸŒ’</div>
    <div class="dayRow">
      <div class="dayBox" data-day="2"><div class="dayLabel">Work Day 1</div><div class="daySub">Day 2</div></div>
      <div class="dayBox" data-day="3"><div class="dayLabel">Work Day 2</div><div class="daySub">Day 3</div></div>
      <div class="dayBox" data-day="4"><div class="dayLabel">Work Day 3</div><div class="daySub">Day 4</div></div>
      <div class="dayBox" data-day="5"><div class="dayLabel">Work Day 4</div><div class="daySub">Day 5</div></div>
      <div class="dayBox" data-day="6"><div class="dayLabel">Work Day 5</div><div class="daySub">Day 6</div></div>
      <div class="dayBox" data-day="7"><div class="dayLabel">Work Day 6</div><div class="daySub">Day 7</div></div>

      <!-- âœ… Shabat #2 of 7 -->
      <div class="dayBox shabat" data-day="8" data-shabat-number="1" data-fow-shabat="2">
        <div class="dayLabel">Shabat</div>
        <div class="daySub">2 OF 7</div>
      </div>
    </div>
    <div class="phaseIcon">ðŸŒ“</div>
  </div>

  <!-- WEEK 2 -->
  <div class="weekRow" data-week="2">
    <div class="weekLabel">2nd Week</div>
    <div class="phaseIcon">ðŸŒ“</div>
    <div class="dayRow">
      <div class="dayBox" data-day="9"><div class="dayLabel">Work Day 1</div><div class="daySub">Day 9</div></div>
      <div class="dayBox" data-day="10"><div class="dayLabel">Work Day 2</div><div class="daySub">Day 10</div></div>
      <div class="dayBox" data-day="11"><div class="dayLabel">Work Day 3</div><div class="daySub">Day 11</div></div>
      <div class="dayBox" data-day="12"><div class="dayLabel">Work Day 4</div><div class="daySub">Day 12</div></div>
      <div class="dayBox" data-day="13"><div class="dayLabel">Work Day 5</div><div class="daySub">Day 13</div></div>
      <div class="dayBox" data-day="14"><div class="dayLabel">Work Day 6</div><div class="daySub">Day 14</div></div>

      <!-- âœ… Shabat #3 of 7 -->
      <div class="dayBox shabat" data-day="15" data-shabat-number="2" data-fow-shabat="3">
        <div class="dayLabel">Shabat</div>
        <div class="daySub">3 OF 7</div>
      </div>
    </div>
    <div class="phaseIcon">ðŸŒ•</div>
  </div>

  <!-- WEEK 3 -->
  <div class="weekRow" data-week="3">
    <div class="weekLabel">3rd Week</div>
    <div class="phaseIcon">ðŸŒ•</div>
    <div class="dayRow">
      <div class="dayBox" data-day="16"><div class="dayLabel">Work Day 1</div><div class="daySub">Day 16</div></div>
      <div class="dayBox" data-day="17"><div class="dayLabel">Work Day 2</div><div class="daySub">Day 17</div></div>
      <div class="dayBox" data-day="18"><div class="dayLabel">Work Day 3</div><div class="daySub">Day 18</div></div>
      <div class="dayBox" data-day="19"><div class="dayLabel">Work Day 4</div><div class="daySub">Day 19</div></div>
      <div class="dayBox" data-day="20"><div class="dayLabel">Work Day 5</div><div class="daySub">Day 20</div></div>
      <div class="dayBox" data-day="21"><div class="dayLabel">Work Day 6</div><div class="daySub">Day 21</div></div>

      <!-- âœ… Shabat #4 of 7 -->
      <div class="dayBox shabat" data-day="22" data-shabat-number="3" data-fow-shabat="4">
        <div class="dayLabel">Shabat</div>
        <div class="daySub">4 OF 7</div>
      </div>
    </div>
    <div class="phaseIcon">ðŸŒ—</div>
  </div>

  <!-- WEEK 4 -->
  <div class="weekRow" data-week="4">
    <div class="weekLabel">4th Week</div>
    <div class="phaseIcon">ðŸŒ—</div>
    <div class="dayRow">
      <div class="dayBox" data-day="23"><div class="dayLabel">Work Day 1</div><div class="daySub">Day 23</div></div>
      <div class="dayBox" data-day="24"><div class="dayLabel">Work Day 2</div><div class="daySub">Day 24</div></div>
      <div class="dayBox" data-day="25"><div class="dayLabel">Work Day 3</div><div class="daySub">Day 25</div></div>
      <div class="dayBox" data-day="26"><div class="dayLabel">Work Day 4</div><div class="daySub">Day 26</div></div>
      <div class="dayBox" data-day="27"><div class="dayLabel">Work Day 5</div><div class="daySub">Day 27</div></div>
      <div class="dayBox" data-day="28"><div class="dayLabel">Work Day 6</div><div class="daySub">Day 28</div></div>

      <!-- âœ… Shabat #5 of 7 -->
      <div class="dayBox shabat" data-day="29" data-shabat-number="4" data-fow-shabat="5">
        <div class="dayLabel">Shabat</div>
        <div class="daySub">5 OF 7</div>
      </div>
    </div>
    <div class="phaseIcon">ðŸŒ‘</div>
  </div>

  <!-- Day 30 row (only if 30-day month) -->
  <div class="weekRow" id="day30Row" style="display:none;">
    <div class="weekLabel">Day 30</div>
    <div class="phaseIcon">ðŸŒ‘</div>
    <div class="dayRow">
      <div class="dayBox day30" data-day="30" style="flex:1;">
        <div class="dayLabel">Waiting Day</div>
        <div class="daySub">Day 30 â€” Dark Moon concealed â€¢ ðŸŒ’ HEDASH appears at evening</div>
      </div>
    </div>
    <div class="phaseIcon">ðŸŒ’</div>
  </div>

  <details class="legendDetails">
    <summary>Legend &amp; Notes</summary>
    <div class="legend">
      <div class="legendRow">
        <div class="legendColor work"></div><span>Work Day</span>
        <div class="legendColor shabat"></div><span>Shabat (shown as a normal day)</span>
        <span>ðŸŒ… Sunset Boundary â€” day changes at evening (~7:00 PM)</span>
      </div>

      <div class="phaseLegendTitle">Moon Phases &amp; Weeks</div>
      <div class="phaseLegendRow">
        <div class="phaseItem"><div class="phaseItemIcon">ðŸŒ’</div><div class="phaseItemText">HEDASH â€“ Day 1</div></div>
        <div class="phaseItem"><div class="phaseItemIcon">ðŸŒ“</div><div class="phaseItemText">Half Moon Waxing â€“ 1st Week</div></div>
        <div class="phaseItem"><div class="phaseItemIcon">ðŸŒ•</div><div class="phaseItemText">Full Moon â€“ 2nd Week</div></div>
        <div class="phaseItem"><div class="phaseItemIcon">ðŸŒ—</div><div class="phaseItemText">Half Moon Waning â€“ 3rd Week</div></div>
        <div class="phaseItem"><div class="phaseItemIcon">ðŸŒ˜</div><div class="phaseItemText">Waning Crescent â€“ 4th Week</div></div>
      </div>

      <div class="calendarNoteBottom">
        In a 29-day month HEDASH appears after Day 29. In a 30-day month, Day 30 is a waiting day, and ðŸŒ’ HEDASH appears at evening when the next month begins (once confirmed).
      </div>
    </div>
  </details>

</div>

<script>
  const monthNameDisplay = {
    1: "YAHUAHâ€™S FIRST MONTH â€” ABAYAB",
    2: "YAHUAHâ€™S SECOND MONTH",
    3: "YAHUAHâ€™S THIRD MONTH",
    4: "YAHUAHâ€™S FOURTH MONTH",
    5: "YAHUAHâ€™S FIFTH MONTH",
    6: "YAHUAHâ€™S SIXTH MONTH",
    7: "YAHUAHâ€™S SEVENTH MONTH",
    8: "YAHUAHâ€™S EIGHTH MONTH",
    9: "YAHUAHâ€™S NINTH MONTH",
    10:"YAHUAHâ€™S TENTH MONTH",
    11:"YAHUAHâ€™S ELEVENTH MONTH",
    12:"YAHUAHâ€™S TWELFTH MONTH"
  };

  const monthBadgeLabels = {
    1: "1st Month â€” Abayab",
    2: "2nd Month",
    3: "3rd Month",
    4: "4th Month",
    5: "5th Month",
    6: "6th Month",
    7: "7th Month",
    8: "8th Month",
    9: "9th Month",
    10:"10th Month",
    11:"11th Month",
    12:"12th Month"
  };

  const hedashInput  = document.getElementById("hedash-input");
  const monthSelect  = document.getElementById("month-select");
  const todayMain    = document.getElementById("today-main");
  const todaySub     = document.getElementById("today-sub");
  const monthBadgeEl = document.getElementById("month-badge");

  const day30Row    = document.getElementById("day30Row");
  const day30Banner = document.getElementById("day30Banner");

  let monthLength = parseInt(localStorage.getItem("kc_monthLength") || "29", 10);
  if (monthLength !== 29 && monthLength !== 30) monthLength = 29;

  /* âœ… DEFAULTS LOCKED FOR THIS MONTH (YOUR SETTINGS) */
  const DEFAULT_HEDASH = "2026-01-20"; // 01/20/2026
  const DEFAULT_MONTH  = "2";          // 2nd Month

  /* Feast of Weeks: Shabat #1 already completed BEFORE Hedash confirmation */
  const FOW_START_AT = 2; // next Shabat shown in-calendar is 2 of 7

  const SUNSET_TIP = "SUNSET BOUNDARY â€” Day changes at sunset (â‰ˆ7:00 PM)";

  function applySunsetDividers(){
    document.querySelectorAll(".dayRow").forEach(row=>{
      const boxes = row.querySelectorAll(".dayBox");
      boxes.forEach((box, idx)=>{
        const on = idx !== 0;
        box.classList.toggle("sunset-divider", on);
        if(on) box.setAttribute("data-sunset-tip", SUNSET_TIP);
        else box.removeAttribute("data-sunset-tip");
      });
    });
  }

  function toggleSunsetBoundaries(){
    document.body.classList.toggle("hide-sunset-boundaries");
  }
  window.toggleSunsetBoundaries = toggleSunsetBoundaries;

  function sanitizeBadgeText(){
    if (!monthBadgeEl) return;
    monthBadgeEl.textContent = (monthBadgeEl.textContent || "")
      .replace(/["â€œâ€]/g, "")
      .trim();
  }

  function syncMonthLengthUI(){
    document.querySelectorAll('input[name="monthLength"]').forEach(r=>{
      r.checked = (parseInt(r.value, 10) === monthLength);
    });

    const show30 = (monthLength === 30);
    if (day30Row) day30Row.style.display = show30 ? "flex" : "none";
    if (day30Banner) day30Banner.hidden = !show30;

    applySunsetDividers();
    sanitizeBadgeText();
  }

  function bindMonthLengthToggle(){
    document.querySelectorAll('input[name="monthLength"]').forEach(radio=>{
      radio.addEventListener("change", (e)=>{
        monthLength = parseInt(e.target.value, 10);
        if (monthLength !== 29 && monthLength !== 30) monthLength = 29;
        localStorage.setItem("kc_monthLength", String(monthLength));
        syncMonthLengthUI();
        updateCalendar();
      });
    });
  }

  function getCurrentMonthNumber(){
    const n = parseInt(monthSelect.value, 10);
    return (!isNaN(n) && n >= 1 && n <= 12) ? n : 2;
  }

  function updateMonthBadge(){
    const monthNum = getCurrentMonthNumber();
    monthBadgeEl.textContent = monthBadgeLabels[monthNum] || "Month";
    sanitizeBadgeText();
  }

  function ensureDefaults(){
    if (!hedashInput.value){
      hedashInput.value = DEFAULT_HEDASH;
      localStorage.setItem("hedashDate", DEFAULT_HEDASH);
    }
    if (!monthSelect.value){
      monthSelect.value = DEFAULT_MONTH;
      localStorage.setItem("kingdomMonthNumber", DEFAULT_MONTH);
    }
    updateMonthBadge();
  }

  function getKingdomToday(){
    const now  = new Date();
    const base = new Date(now.getFullYear(), now.getMonth(), now.getDate());
    if (now.getHours() >= 19) base.setDate(base.getDate() + 1);
    return base;
  }

  function updateFOWShabatLabels(){
    // For each shabat day box in the month (Days 8,15,22,29), show FOW numbers starting at 2
    const shabatDays = [8, 15, 22, 29];
    shabatDays.forEach((day, idx)=>{
      const box = document.querySelector(`.dayBox.shabat[data-day="${day}"]`);
      if (!box) return;
      const label = box.querySelector(".dayLabel");
      const sub   = box.querySelector(".daySub");

      if (label) label.textContent = "Shabat";
      const fowNum = FOW_START_AT + idx; // 2,3,4,5
      if (sub) sub.textContent = `${fowNum} OF 7`;
    });
  }

  function updateCalendar(){
    syncMonthLengthUI();
    updateFOWShabatLabels();

    const hedashValue  = hedashInput.value;
    const currentMonth = getCurrentMonthNumber();
    const monthName    = monthNameDisplay[currentMonth] || "YAHUAHâ€™S MONTH";

    if (!hedashValue){
      todayMain.textContent = "Set the HEDASH date above to activate the Kingdom Calendar.";
      todaySub.textContent  = "The tool will announce the current week, work day or Shabat, and day of YAHUAHâ€™S month according to the Path of Years.";
      return;
    }

    const hedashDate = new Date(hedashValue + "T00:00:00");
    const hedashMid  = new Date(hedashDate.getFullYear(), hedashDate.getMonth(), hedashDate.getDate());

    let kingdomToday = getKingdomToday();
    if (kingdomToday < hedashMid) kingdomToday = hedashMid;

    const diffMs     = kingdomToday - hedashMid;
    const dayOffset  = Math.floor(diffMs / (24*60*60*1000));
    const dayOfMonth = dayOffset + 1;

    if (dayOfMonth > monthLength){
      todayMain.textContent = `TODAY IS BEYOND DAY ${monthLength} FROM THIS HEDASH â€” CONFIRM THE NEXT HEDASH TO BEGIN ${monthName}.`;
      todaySub.textContent  = "Once the next Renewed Moon is confirmed, enter that date above to begin the new month.";
      return;
    }

    if (dayOfMonth === 1){
      todayMain.textContent = `TODAY IS HEDASH â€” THE RENEWED MOON â€” DAY 1 OF ${monthName}, ACCORDING TO THE PATH OF YEARS.`;
      todaySub.innerHTML    = `<span class="pillHighlight">HEDASH</span> â€¢ Day 1 sets the Shabat pattern for ${monthName}.`;
      return;
    }

    if (dayOfMonth === 30){
      todayMain.textContent = "TODAY IS DAY 30 â€” A WAITING DAY â€” DARK MOON CONCEALED â€” AND ðŸŒ’ HEDASH APPEARS AT EVENING WHEN CONFIRMED TO BEGIN THE NEXT MONTH OF YAHUAH.";
      todaySub.innerHTML =
        `<span class="pillHighlight">Day 30</span> &nbsp;â€¢&nbsp; <span class="pillHighlight">Waiting Day</span> &nbsp;â€¢&nbsp; <span class="pillHighlight">HEDASH at Evening</span>`;
      return;
    }

    // Keep banner messaging simple (no highlights)
    todayMain.textContent = `TODAY IS DAY ${dayOfMonth} OF ${monthName}, ACCORDING TO THE PATH OF YEARS.`;
    todaySub.innerHTML = `<span class="pillHighlight">Feast of Weeks Count</span> â€¢ Shabats inside this month are labeled by count (2 of 7, 3 of 7, etc.).`;
  }

  function sharePage(){
    if (navigator.share){
      navigator.share({
        title:"Kingdom Calendar â€“ Path of Years",
        text:"Check out the Kingdom Calendar â€“ Path of Years tool!",
        url:"https://kingdomcalendartool.com/"
      }).catch(()=>{});
    } else {
      alert("Sharing is not supported on this browser.");
    }
  }
  window.sharePage = sharePage;

  // Load saved values if present, else lock to your new settings
  const savedHedash = localStorage.getItem("hedashDate");
  if (savedHedash) hedashInput.value = savedHedash;
  const savedMonth  = localStorage.getItem("kingdomMonthNumber");
  if (savedMonth) monthSelect.value = savedMonth;

  hedashInput.addEventListener("change", ()=>{
    if (hedashInput.value) localStorage.setItem("hedashDate", hedashInput.value);
    else localStorage.removeItem("hedashDate");
    updateCalendar();
  });

  monthSelect.addEventListener("change", ()=>{
    const monthNum = getCurrentMonthNumber();
    localStorage.setItem("kingdomMonthNumber", String(monthNum));
    updateMonthBadge();
    updateCalendar();
  });

  ensureDefaults();
  applySunsetDividers();
  syncMonthLengthUI();
  bindMonthLengthToggle();
  updateCalendar();
  setInterval(updateCalendar, 60 * 1000);

  document.addEventListener("visibilitychange", ()=>{
    if (!document.hidden) updateCalendar();
  });
</script>

</body>
</html>
